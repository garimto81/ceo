# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

---

## 프로젝트 개요

CEO 보고서 작성 표준 프로젝트. Canvas 원본에서 추출한 28개 패턴을 통합한 15개 섹션 규칙.

- **핵심 문서**: `PRD-001-writing-standard.md` (v2.0) - 보고서 작성의 바이블
- **원본**: Canvas "0211_WSOP TV 외주 선정" (`canvas/raw.json`, 206줄)
- **대상**: 보고서 작성자 (인간 + AI 에이전트)

---

## 아키텍처

이 프로젝트는 **규칙 정의 → 템플릿 적용 → 검증** 3단계 파이프라인으로 구성된다.

```
PRD-001 (규칙 원본)
  │
  ├── templates/          작성자가 복사하여 사용
  │   ├── vendor-comparison.md    업체 비교용 (HTML 주석 가이드 포함)
  │   └── investment-proposal.md  투자 제안용 (ROI 중심 변형)
  │
  ├── validation/         작성 완료 후 검증
  │   ├── rules.json              22개 자동 검증 규칙 (정규식 기반)
  │   └── prompt-template.md      4단계 AI 검증 프롬프트 (38개 항목)
  │
  └── canvas/             규칙의 근거 (원본 역추적용)
      ├── raw.json                Canvas HTML 원본
      └── line-map.md             줄번호-패턴 매핑 (28개 패턴 근거 색인)
```

**핵심 관계**: PRD-001의 모든 규칙은 Canvas 원본에서 추출되었다. `canvas/line-map.md`가 "이 규칙이 원본 어디서 나왔는가"를 추적하는 색인이다. 규칙 수정 시 반드시 Canvas 근거를 확인한다.

---

## 작성 워크플로우

### 보고서 작성 시

1. `PRD-001-writing-standard.md` 전체 읽기 (특히 섹션 10 "작성 전 체크리스트" 10개 항목)
2. `templates/` 에서 적합한 템플릿 선택 → 복사
3. HTML 주석(`<!-- 가이드: -->`) 참조하며 [대괄호] 채우기
4. Draft 완성 후 Polish 단계 수행 (PRD-001 섹션 12)
5. `checklists/` 4영역 체크 (38개 항목: 22 AUTO + 16 MANUAL)

### 보고서 검증 시

`validation/prompt-template.md`를 AI에 제공하고 4단계 순차 검증:

| Phase | 영역 | 항목 수 | 방법 |
|:-----:|------|:-------:|------|
| 1 | 자동 검증 | 22 | `rules.json` 기반 정규식/구조 분석 |
| 2 | 수사 검증 | 8 | AI 의미 분석 (반전, Pivot, 양보-회수 등) |
| 3 | 포맷 검증 | 5 | 시각적 확인 (이미지 3단, 볼드 스캔 등) |
| 4 | 어투 검증 | 3 | 전체 읽기 후 톤 판정 |

---

## AI가 자주 위반하는 핵심 규칙

상세 규칙은 `PRD-001-writing-standard.md` 참조. 아래는 AI가 반복적으로 실수하는 항목만 추림.

### 절대 금지

- `한글(영문)` 병기 (예: "대역폭(Bandwidth)" → "Bandwidth"만)
- 이모지, 1인칭("저는", "제가"), "감사합니다"
- "결론"/"최종 추천" 헤더 → **"중간 정리"** 사용
- 문어체 접속사("그러나", "그렇지만") → **"하지만"** 사용
- Pros/Cons 테이블, 점수/별점, 리스크 매트릭스
- 페이지 하단 각주 (인라인 링크는 허용)
- "다음으로", "이어서" 전환 문구
- 한 문장에 볼드 2회 이상
- 불확실한 사항의 확정적 서술

### 구조

- **5단계**: 제외 사유 선행 → 과정 요약 → 핵심 비교(H2 세분화) → 중간 정리(조건별 선택지) → 의견
- H1 최대 3개, H2는 H1당 최대 3개
- 팩트 70%, 의견 30%. 의견은 `**의견**` 헤더로 분리
- 저가 먼저, 고가 나중 (클라이맥스 순서)

### 수사

- **3단 반전**: `[표면 인상] → "하지만" → [심층] → "결국" → [수렴]`
- **종결어미 점층법**: 전반부(사실 `~했습니다`) → 중반(추정 `~보입니다`) → 후반(판단 `~판단됩니다`)
- **양보-회수**: `~해도 됩니다. 하지만 ~판단됩니다` (의견 후반 1회)
- 비유는 도입부에 한 번만, 한국 독자 친화적 대상

### 포맷

- 금액: `$ 750,000` (달러 뒤 공백 1칸, 한화 금지, 괄호로 조건 병기)
- 볼드: 업체명, 금액, 선택지 헤더, 핵심 판단 문장
- 테이블: 숫자 비교에만, 최대 3행x3열, 헤더에 과금 유형 병기
- 불릿: 기능 나열은 명사형, 선택 조건은 해체(`~다`). 합쇼체 금지

### 접속사 빈도 제한 (문서 전체 기준)

| 접속사 | 최대 횟수 |
|--------|:---------:|
| 하지만 | 3회 |
| 결국 | 3회 (접속사 2 + 부사 1) |
| 우리 | 3회 |
| 다만 | 1회 |

---

## 참조 문서

| 문서 | 용도 |
|------|------|
| `PRD-001-writing-standard.md` | 15개 섹션 전체 규칙 (v2.0) |
| `examples/vendor-selection.md` | WSOP TV 사례 분석 (28개 패턴 적용 예시) |
| `examples/pattern-catalog.md` | 28개 패턴 실례 카탈로그 |
| `canvas/line-map.md` | Canvas 줄번호-패턴 매핑 (규칙 근거 역추적) |
| `validation/prompt-template.md` | 4단계 AI 검증 프롬프트 |
